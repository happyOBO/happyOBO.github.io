---
title: "[ììœ¨ì£¼í–‰] SSH(secure shell)"
date: 2020-12-18 00:11:28 -0400
categories: Linux
---

### ssh

- sshëŠ” í†µì‹  êµ¬ê°„ì„ ì•”í˜¸í™”
- ì•”í˜¸í™” ë˜ì§€ ì•Šì€ í†µì‹ ì„ ì‚¬ìš©í•˜ë˜ telnet ì„œë¹„ìŠ¤ëŠ” ì—†ì–´ì§
- ê¸°ë³¸ìœ¼ë¡œ ë¦¬ëˆ…ìŠ¤ ì„œë²„ë“¤ì€ ssh ì„œë¹„ìŠ¤ê°€ íƒ‘ì¬ë˜ì–´ìˆë‹¤.
- Linuxì˜ ssh ëŠ” openssh ì‚¬ìš©

### ssh server, ssh client

- sshd
    - ssh daemon, ì¦‰ ssh serverì„ ì˜ë¯¸í•œë‹¤.
- ssh
    - ssh clientì´ë©°, ssh ëª…ë ¹ì–´ê°€ ë°”ë¡œ ssh client CLI ìœ í‹¸ë¦¬í‹°ì´ë‹¤.
    - MS ìœˆë„ ê³„ì—´ì—ì„œ ì ‘ì†í•˜ë ¤ë©´ putty ê°™ì€ íˆ´ì„ ì‚¬ìš©í•œë‹¤.

### sshd : prerequisite

- sshd ì„œë²„ì˜ ì¤€ë¹„ ì‘ì—…
    1. sshd ì„œë²„ì˜ ì„¤ì¹˜ ì—¬ë¶€ í™•ì¸
    2. sshd ì„œë¹„ìŠ¤ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸
    3. ssh port(22/tcp)ê°€ ë°©í™”ë²½ì— í—ˆìš©ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
- sshd ì„œë¹„ìŠ¤ê°€ ì‹¤í–‰ì¤‘ì¸ì§€ í™•ì¸í•œë‹¤.
    - systend ê¸°ë°˜ : ``systenctl status sshd``
    - init ê¸°ë°˜(êµ¬í˜• ë¦¬ëˆ…ìŠ¤) : ``service sshd status``
    ```bash
    obo@obo-900X3L:~/Github/happyOBO.github.io$ systemctl status sshd
    â— ssh.service - OpenBSD Secure Shell server
    Loaded: loaded (/lib/systemd/system/ssh.service; enabled; vendor preset: enabled)
    Active: active (running) since ëª© 2020-12-17 23:58:30 KST; 1min 40s ago
    Main PID: 23314 (sshd)
    CGroup: /system.slice/ssh.service
            â””â”€23314 /usr/sbin/sshd -D

    12ì›” 17 23:58:30 obo-900X3L systemd[1]: Starting OpenBSD Secure Shell server...
    12ì›” 17 23:58:30 obo-900X3L sshd[23314]: Server listening on 0.0.0.0 port 22.
    12ì›” 17 23:58:30 obo-900X3L sshd[23314]: Server listening on :: port 22.
    12ì›” 17 23:58:30 obo-900X3L systemd[1]: Started OpenBSD Secure Shell server.
    ```
    ```s
    ## ssh port(22/tcp) ìƒíƒœ í™•ì¸
    obo@obo-900X3L:~/Github/happyOBO.github.io$ ss -nltp
    State       Recv-Q Send-Q       Local Address:Port                      Peer Address:Port              
    LISTEN      0      5                127.0.1.1:53                                   *:*                  
    LISTEN      0      128                      *:22                                   *:*                  
    LISTEN      0      5                127.0.0.1:631                                  *:*                  
    LISTEN      0      128                     :::22                                  :::*                  
    LISTEN      0      5                      ::1:631                                 :::* 
    ```

- ë³´ë‹ˆê¹Œ 22ë²ˆ í¬íŠ¸ë¥¼ ì„œë¹„ìŠ¤ í•˜ê³  ìˆëŠ” ì• ê°€ ë‘ê°œë‹¤. ì™œì¼ê¹Œ!
    - ìœ„ì—ê±´ IPv4, ì•„ë˜ê±´ IPv6 ì£¼ì†Œì´ë‹¤...!

### ssh client

- ``ssh [-p port] [username@] <host addr>``
    - ì˜ˆì‹œ ) ``ssh 192.168.52.110``, ``ssh linuxer@192.168.52.110`` ,``ssh -p 20022 192.168.52.110``
    - port ë¥¼ ìƒëµí•˜ë©´, default ë²ˆí˜¸ì¸ 22 ë²ˆìœ¼ë¡œ ëœë‹¤.

### ssh-keygen

- ì‹¤ì œ ì‹¤ë¬´ì—ì„œëŠ” ì•”í˜¸ë¥¼ ë‹¤ ì¹˜ì§€ ì•Šê³ , í‚¤ë¥¼ ë§Œë“¤ì–´ì„œ í‚¤ ê¸°ë°˜ í†µì‹ ì„ í•œë‹¤.
- í‚¤ë¥¼ ë§Œë“¤ì–´ì£¼ëŠ”ê²Œ ë°”ë¡œ ssh-keygen!
- ``-N`` : new passphrase
- pubkey ê¸°ë°˜ ì—°ê²°
    ```s
    ssh-keygen -N ""
    ssh-copy-id obo@192.168.52.110 # remoteì˜ ~/.ssh/authorized_keysì— ë³µì‚¬í•˜ëŠ” ê³¼ì •
    ssh obo@192.168.52.110
    ```

### curl

- í”„ë¡œê·¸ë¨ì„ ì••ì¶•ëœ íŒŒì¼ í•˜ë‚˜ë¡œ ë‹¤ìš´ ë°›ì„ ë•Œ ì‚¬ìš©í•œë‹¤.
- URLì„ ê¸°ë°˜ìœ¼ë¡œ í†µì‹ í•˜ëŠ” ê¸°ëŠ¥ ì œê³µ
- CLI tool ê³¼ library ì œê³µ

    ```s
    curl [option] <URL>
    ```

    ```s
    curl -O https://www.mycompany.com/docs/manual.html
    # maual.html íŒŒì¼ë¡œ ì €ì¥
    curl -o nate.html https://www.nate.com
    # URLì— íŒŒì¼ ëª…ì´ ì—†ìœ¼ë¯€ë¡œ -o ì˜µì…˜ìœ¼ë¡œ ì§ì ‘ ì§€ì •
    obo@obo-900X3L:~$ curl v2.wttr.in/Seoul
    â”Œâ”¤  Weather report for: Seoul  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                                        â”‚
    â”‚                                                                        â”‚
    â”‚       Fri 18 Dec              Sat 19 Dec              Sun 20 Dec       â”‚
    â”‚                       â•·                       â•·                        â”‚
    â”‚                                                                        â”‚
    â”‚                                                                        â”‚
    â”‚+0         â¡°â ‰â¡†                                                          â”‚
    â”‚â¡‡         â¢°â  â ¸â¡€                                                         â”‚
    â”‚â¡‡         â ‡   â¢£   â¢€â£€    â¢€â ¤â ¤â¢„â¡€                                           â”‚
    â”‚â¡‡        â¡œ    â ˆâ¢†â¢€â –â  â ‘â ¤â¡ â ”â    â â¡„          â£€â¡€                              â”‚
    â”‚â¡‡    â£€â£€â¡ â ”â       â             â ˆâ ¡â¡€      â¡ â Š â ˆâ¢†                       â¢€â£€â¡€   â”‚
    â”‚â¡‡  â¡ â Š                          â ˆâ ’â ¤â£€â¡€â¢€â¡”â    â ˆâ¡‚                    â¢€â ”â  â ‘â¡†  â”‚
    â”‚â¡‡â¡ â Š                                â ˆâ       â ±â¡€          â£€â ¤â ¤â ¤â£€â£€â£€â ¤â ’â     â¢˜  â”‚
    â”‚â —â                                           â¢£        â¢€â                â¡‡ â”‚
    â”‚                                            â ˆâ¢†      â¡ â ƒ                â¢± â”‚
    â”‚-9                                           â ˆâ ¢â£€â¢â¡ â ’â Š                  â ˜â „â”‚
    â”‚                                                                        â”‚
    â”‚â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â•‚â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â•‚â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â•‚â”‚
    â”‚     6    12    18           6    12    18           6    12    18      â”‚
    â”‚                                                                        â”‚
    â”‚                  0.67mm|0%                                             â”‚
    â”‚                     â–‡â–ˆ                                                 â”‚
    â”‚                     â–ˆâ–ˆâ–‚                                                â”‚
    â”‚                    â–ˆâ–ˆâ–ˆâ–ˆ                                                â”‚
    â”‚                    â–ˆâ–ˆâ–ˆâ–ˆ_                                               â”‚
    â”‚              __   â–‡â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–â–‡â–…â–‚                                         â”‚
    â”‚                                                                        â”‚
    â”‚                                                                        â”‚
    â”‚ â˜€ï¸  â˜€ï¸  â˜€ï¸  â˜€ï¸  â˜€ï¸  â˜ï¸  ğŸŒ¨ â„ï¸  â˜ï¸  â„ï¸  â›…ï¸ â›…ï¸ â˜ï¸  â˜€ï¸  â˜€ï¸  â›…ï¸ â›…ï¸ â›…ï¸ â˜€ï¸  â˜€ï¸  â˜€ï¸  â˜€ï¸  â˜€ï¸  â˜€ï¸ â”‚
    â”‚ â†˜  â†˜  â†˜  â†˜  â†“  â†—  â†–  â†  â†–  â†˜  â†˜  â†˜  â†˜  â†˜  â†˜  â†˜  â†˜  â†˜  â†˜  â†˜  â†˜  â†˜  â†˜  â†˜ â”‚
    â”‚ 9  5  3  3  1  5  3  4  3  1  5  8  12 15 15 13 10 7  6  6  12 14 13 9 â”‚
    â”‚                                                                        â”‚
    â”‚ğŸŒ’                     ğŸŒ’                      ğŸŒ’                     ğŸŒ’â”‚
    â”‚       â”€â”â”â”â”â”â”â”â”â”â”€             â”€â”â”â”â”â”â”â”â”â”â”€             â”€â”â”â”â”â”â”â”â”â”â”€      â”‚
    â”‚                                                                        â”‚
    â”‚                                                                        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    Weather: ğŸŒ¨  Light snow, -1Â°C, 79%, â†4km/h, 1028hPa
    Timezone: Asia/Seoul
    Now:    00:31:00+0900 | Dawn:    07:11:18  | Sunrise: 07:41:11
    Zenith: 12:28:11      | Sunset:  17:15:16  | Dusk:    17:45:08
    Location: ì„œìš¸íŠ¹ë³„ì‹œ, ëŒ€í•œë¯¼êµ­ [37.5668,126.9784]

    Follow @igor_chubin for wttr.in updates
    ```

### CLI ì—ì„œ ì›¹ë¸Œë¼ìš°ì§•

1. ``sudo apt -y install elinks``
2. ``elinks``
3. ì£¼ì†Œ ê²€ìƒ‰

### wget

- ``wget <URL>``
- wgetê³¼ curlì€ ëŒ€ë¶€ë¶„ì˜ ê¸°ëŠ¥ì€ ë¹„ìŠ·í•˜ë‚˜, curlì´ ë”ë§ì€ ê¸°ëŠ¥ì„ ê°€ì§„ë‹¤. í•˜ì§€ë§Œ, íŒŒì¼ ë‹¤ìš´ë¡œë“œì— íŠ¹í™”ëœ ê¸°ëŠ¥ì´ ì¡´ì¬í•œë‹¤.

### nc (netcat)

- network ê¸°ëŠ¥ì´ ê°€ëŠ¥í•œ cat

